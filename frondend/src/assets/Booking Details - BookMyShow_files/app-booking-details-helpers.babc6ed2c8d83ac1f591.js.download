"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[1641,6739,72188,74667],{800:(e,t,n)=>{n.r(t),n.d(t,{createCodeInvMap:()=>c,generateFnBLink:()=>u,generateFnBQueryParams:()=>g,getNonBookingFlowFnBUrl:()=>h,isPastDate:()=>d,modifyPurchaseHistoryData:()=>T,parseDate:()=>l,shapeObject:()=>m});var o=n(74353),a=n.n(o),i=n(6161),s=n(56314),r=n(92003);function l(e){const t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/g.exec(e);if(t){return`${[t[1],t[2],t[3]].join("-")}T${[t[4],t[5]].join(":")}+05:30`}return e}function d(e,t){const n=l(e),o=t?l(t):new Date(currentDateTime);return new Date(o).getTime()>new Date(n).getTime()}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const o=[],a=[],s=[],r=[],l=[],d=[],c=[],m=[];let u,g=0;for(g=0;g<e.length;g++)u=e[g],u.Item_lngId===i.BOOKASMILE_ITEM_ID?o[u.BookingId]=u.Total_Amt:"FP"===u.Item_Type?(s[u.BookingId]=s[u.BookingId]||[],s[u.BookingId].push(u)):"MR"===u.Item_Type?(l[u.BookingId]=l[u.BookingId]||[],l[u.BookingId].push(u)):"DN"===u.Item_Type?(m[u.BookingId]=m[u.BookingId]||[],m[u.BookingId].push(u)):"FD"===u.Item_Type?(a[u.BookingId]=a[u.BookingId]||[],a[u.BookingId].push(u)):"BC"===u.Item_Type&&(r[u.BookingId]=r[u.BookingId]||[],r[u.BookingId].push(u));for(g=0;g<t.length;g++)u=t[g],d[u.Booking_strId]=d[u.Booking_strId]||[],d[u.Booking_strId].push(u);for(g=0;g<n.length;g++)u=n[g],c[u.Trans_lngId]=c[u.Trans_lngId]||[],c[u.Trans_lngId].push(u);return{BookASmile:o,FnBMap:a,FPMap:s,BCMap:r,addOnMap:l,CouponMap:d,basMap:m,splitMTicket:c}}function m(e){const{ShowEndDateTime:t="",Event_strType:n,TransQty:o,TicketsAmt:i,BookingFee:s,DiscountAmt:r,DeliveryFee:l,AddCharges:d,SeatDeliveryFees:c,Trans_Total:m,Event_strCode:u,Screen_strName:g,BookingId:h,BookingStamp:T,TransStatus:_,TransId:I,Booking_lngId:p,Venue_strCode:f,Merchandise_Exists:k,BookingStatus:D,CancellationCutOff:S,CancellationCutOffTime:C,CancellationEligibilityDesc:w,CancellationEligibilityPreChecks:v,IsEligibleForUserCancellation:y,Trans_strMTicketSplit:E,TType_strDescription:B,Trans_strQRCodeText:M,Booking_strType:b,Venue_strApplication:A,Session_lngSessionId:P,PaymentStatus:F,Trans_strPaymentMode:N,Trans_strUnpaidShowButtons:$,Venue_strHasFoodBookingFlow:L,Venue_strHasFoodSales:O,allowCancel:R,webMessage:U,superstarCashback:V,TransPaymentStatus:Y,ShowDateTime:H,Trans_strHasMTicket:x,Venue_strHasMTicketSplit:Q,Trans_strMode:j,joinNow:K,messages:G,refund:W,cancellationInfoText:z="",showCancellationIcon:q=!1,cancellationIconURL:J="",cancellationMessage:X="",cancellationCTA:Z="",cancellationPolicyURL:ee="",ShowDate:te,ShowTime:ne,redirectionType:oe,Merchandise:ae,Item_Type:ie,Inv_EventTitle:se,InvCinema_Name:re,InvScreen_Name:le,SeatInfo:de,TransExpiry:ce,InvAmt:me,barcode:ue}=e;return{Event_strType:n,TransId:I,Venue_strCode:f,Booking_lngId:p,BookingId:h,PaymentStatus:F,BookingStatus:D,BookingStamp:T,CancellationCutOff:S,CancellationCutOffTime:C,CancellationEligibilityDesc:w,CancellationEligibilityPreChecks:v,IsEligibleForUserCancellation:y,superstarCashback:V,Trans_strPaymentMode:N,Trans_strUnpaidShowButtons:$,allowCancel:R,TransPaymentStatus:Y,webMessage:U,TransStatus:_,Event_strCode:u,ShowEndDateTime:t,Merchandise_Exists:k,Trans_strMTicketSplit:E,Trans_strQRCodeText:encodeURIComponent(M),Booking_strType:b,Venue_strHasFoodBookingFlow:L,Venue_strHasFoodSales:O,Venue_strApplication:A,Session_lngSessionId:P,Event_strShortName:e.EventTitle||se||ae,Event_strLanguage:e.EventLanguage,Event_strEventDimension:e.EventDimension,TType_strDescription:B||"",Venue_strShortName:e.Cinema_strName||re,Screen_strName:g||le,Trans_strSeatInfo:de,Trans_ShowDateTime:a()(H||ce,"YYYYMMDDHHmm"),Trans_intQuantity:parseInt(o,10),RealShowDateTime:a()(H||ce,"YYYYMMDDHHmm").format("ddd, DD MMM YYYY"),ShowDateTime:H,Trans_strHasMTicket:x,Venue_strHasMTicketSplit:Q,cancellationInfoText:z,showCancellationIcon:q,cancellationIconURL:J,cancellationMessage:X,cancellationCTA:Z,cancellationPolicyURL:ee,cost:{TransQty:o,TicketsAmt:i,BookingFee:s,DiscountAmt:r,DeliveryFee:l,AddCharges:d,Trans_Total:m||me,SeatDeliveryFees:c},Trans_strMode:j,joinNow:K,messages:G,refund:W,ShowDate:te,ShowTime:ne,redirectionType:oe,Merchandise:ae,Item_Type:ie,barcode:ue}}function u(e){return`${h(e)}`}function g(e){return`vc=${e.Venue_strCode}&bidint=${e.Booking_lngId}&bid=${e.BookingId}&tid=${e.TransId}`}function h(e){const t=a()(e.ShowEndDateTime,"YYYYMMDDHHmm").format("YYYYMMDD"),n={venueName:e.Venue_strShortName,dateCode:t,venueCode:e.Venue_strCode,bookingId:e.BookingId,bookingLngId:e.Booking_lngId,transId:e.TransId,eventCode:e.Event_strCode,sessionId:e.Session_lngSessionId,cinemaType:e.Venue_strApplication,seatQty:e.Trans_intQuantity,purchasedFnb:e.FnB?.length,Event_strShortName:e.Event_strShortName};return`${r.FNB_BASE}/${e.Venue_strCode}?q=${(0,s.encodeQueryParams)(n)}`}const T=e=>{let{EventTitle:t,EventLanguage:n,Cinema_strName:o,SeatInfo:i,Screen_strName:s,Event_strCode:r,ShowDateTime:l,TransId:d,BookingId:c,Venue_strCode:m,EventCensor:u,TransQty:g,messages:h,EventDimension:T,redirectionType:_,Linked_strBookingId:I,cta:p,alertEmail:f,alertPhone:k,Event_strType:D,ticketInfoAction:S,ShowEndDateTime:C}=e;return{transId:d,bookingId:c,venueCode:m,ticketQty:g,eventCode:r,showName:t,showCensor:u,showDimension:T,showLang:n,showStartTime:a()(l,"YYYYMMDDHHmm").format("ddd, DD MMM YYYY | h:mm A")||"",cinemaName:o,screenName:s,seatInfo:i,messages:h,redirectionType:_,linkedBookingId:I,cta:p,alertEmail:f,alertPhone:k,eventType:D,ticketInfoAction:S,ShowEndDateTime:C}}},9443:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s,handleAnalyticsForBookingDetails:()=>i});var o=n(67005),a=n(98659);const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={...(()=>{const{bookingDetails:{orderDetails:{commonAnalytics:e={}}={}}={}}=a.default.getState();return e})(),...e};(0,o.handleAnalyticsForAllVendors)(n,t)},s=null},43204:(e,t,n)=>{n.r(t),n.d(t,{CancellationHiddenForm:()=>u,handleDesktopCancellationFlow:()=>g,handleMobileCancellationFlow:()=>h});var o=n(47767),a=n(30824),i=n(81097),s=n(6161),r=n(7982),l=n(38548),d=n(95466),c=n(35428),m=n(74848);const u=()=>{const{pathname:e="",search:t=""}=(0,o.zy)(),n=`/myprofile/cancel-ticket?referrer=${encodeURIComponent(`${e}${t}`)}`;return(0,m.jsx)("form",{style:{display:"none"},id:"ticketCancellationForm",method:"post",action:n,children:(0,m.jsx)("input",{id:"transactionData",type:"hidden",name:"transData",value:""})})},g=(e,t)=>{let{venueCode:n,transactionId:o,bookingId:s,eventName:r,eventCode:l,venueName:u,showDate:g,showTime:h,seatInfo:T,totalAmount:_}=t;e((0,a.showSnackBar)({element:(0,m.jsx)(i.default,{message:c.redirectionMessage}),isVisible:!0,autoHideDuration:3500,verticalPosition:"top",horizontalPosition:"center"}));const I={tickets:{Venue_strCode:n,TransId:o,BookingId:s,EventTitle:r,Event_strCode:l,Cinema_strName:u,ShowDate:g,ShowTime:h,SeatInfo:T,TicketsAmt:_}},p=document.getElementById("ticketCancellationForm");if(p){const e=document.getElementById("transactionData");return e&&(e.value=JSON.stringify(I),p.submit()),void(0,d.logError)("Failed to find form input element to set value - Cancellation")}(0,d.logError)("Failed to find form element to submit - Cancellation")},h=(e,t,n)=>{let{venueCode:o,transactionId:a,bookingId:i}=n;const{pathname:d,search:c}=window.location;e((0,r.setCookie)({name:l.TARGET_TICKET_FOR_CANCELLATION,value:{Venue_strCode:o,TransId:a},storage:"S"})),t(`${s.myProfileCancelBookingUrl}?referrer=${encodeURIComponent(`${d}${c}`)}`,{replace:!0,state:{isFromPTM:!0,transactionId:a,bookingId:i}})}},73951:(e,t,n)=>{n.r(t),n.d(t,{commonClickHandler:()=>M,default:()=>P,handleCardClick:()=>A,handleCloseCta:()=>v,handleSetCookieAndRedirect:()=>B,handleSplitTicketSuccess:()=>E,handleTicketActionClick:()=>b});var o=n(56314),a=n(69701),i=n(30824),s=n(81097),r=n(53623),l=n(88539),d=n(6161),c=n(800),m=n(95466),u=n(6826),g=n(9443),h=n(43204),T=n(30494),_=n(73492),I=n(86745),p=n(91819),f=n(98659),k=n(35428),D=n(74848);let S="",C={};const w=(e,t,n,o,a,i)=>{const{pathname:s,search:r}=window.location;clearTimeout(S),t((0,T.setBottomSheetData)(e)),n(`${s}${r}`,{replace:!0,state:{modalType:o,widgetId:a,isLiveEvents:i}})},v=(e,t)=>{C=f.default.getState();const{bookingDetails:{animationProperties:n={}}={}}=C,{dalayBeforeResetingBottomsheetData:o}=n;clearTimeout(S),S=setTimeout((()=>{t((0,T.resetBottomSheetData)())}),o);const{pathname:a,search:i}=window.location;e(`${a}${i}`,{replace:!0,state:{modalType:"",widgetId:""}})},y=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{pathname:a,search:i}=window.location,s=new URL(e),{pathname:r="",search:l=""}=s,d=`${r}${l?`${l}&`:"?"}referer=${encodeURIComponent(`${a}${i}`)}`;o&&v(n,t),t((0,T.setIsInternalCardRedirection)()),n(d)},E={navigate:()=>{},refresh:!1,dispatch:()=>{},isDesktop:!1,onSuccess:function(){this.refresh?(this.isDesktop?this.navigate(-1):this.navigate(-2),this.dispatch((0,T.setSplitTicketStatus)(!0))):this.navigate(-1)}},B=(e,t,n,o)=>{n((0,l.setCookie)({name:o||k.COOKIE_DEALS_TOKEN,value:t,sameSite:"None",secure:!0,stringify:!1,domain:d.COUPON_COOKIE_DOMAIN})),window.location.assign(e)},M=(e,t,n,l,M,b)=>{if(!t)return null;const{analytics:A={},id:P=""}=e||{},{id:F="",type:N="",url:$="",analytics:L={},additionalData:O={}}=t||{},{refresh:R=!1,refreshScreen:U=!1,forceLogout:V=!1,webviewParams:Y={},screenData:H={}}=O||{},{redeemToken:x="",cookieName:Q="",venueCode:j=""}=Y||{},{widgetId:K,isDesktop:G=!1,metaInformation:W,isRewardAPIParam:z}=b||{},{isNotIntendedUser:q=!1,notIntendedUserMessage:J=""}=W||{},X="bottomsheet"===N&&"generic"===F,Z="bottomsheet"===N&&"login"===F,ee="youtube"===N,te="bottomsheet"===N&&"coupons-redeem"===F,ne="bottomsheet"===N&&["deals-redeem","fnb-redeem","nonfnb-redeem"].includes(F),oe="deals-redeem"===F&&"router"===N&&$,ae="rewards"===F&&"router"===N&&$,ie="rewards"===F&&"router"===N&&!!Object.keys(H)?.length,se="helpCentre"===F&&"router"===N&&$,re="bottomsheet"===N&&"rewards-redeem"===F,le="deals"===F,de="couponsnonfnb"===F,ce=("login"===F||"login"===P)&&"router"===N,me=ce&&$,ue="share"===N,ge="external"===N&&$,he="router"===N&&$,Te="splitTicket"===N,_e="cancelTransaction"===N,Ie="close"===N,pe="closeScreen"===N,fe="scroll"===N,ke="rating"===N,De="fnb"===F&&"router"===N,Se=oe||"peppofnb"===F&&"router"===N,Ce="bottomsheet"===N&&"feedback"===F,we="horizontal-scroll"===N,ve="submit-feedback"===N,ye="router"===N&&"transferTicket"===F,Ee="api_call"===N,Be="bottomsheet"===N&&"cancelRequest"===F,Me="router"===N&&"leSynopsis"===F&&$;if((0,g.handleAnalyticsForBookingDetails)({...A,...L}),!F&&!N)return null;if((R||U)&&((e,t,n)=>{const{search:o}=t,a=new URLSearchParams(o),i=a.get("transactionID")||a.get("leTransactionID")||"";i&&n((0,I.resetRefreshEpoch)(i))})(0,l,M),q&&(ae||te||le||de||_e||Te||De))M((0,i.showSnackBar)({element:(0,D.jsx)(r.default,{message:J||k.errorWidgetFunctionality}),isVisible:!0,autoHideDuration:3500,verticalPosition:"bottom",horizontalPosition:"center"}));else if(X)w(t,M,n,k.PTM_GENERIC_MODAL,K);else if(te)w(t,M,n,k.PTM_COUPON_MODAL,K);else if(ne)w(t,M,n,k.PTM_INDIVIDUAL_COUPON_MODAL,K);else if(re)((e,t,n,o,a)=>{const{additionalData:i={}}=e||{},{bottomSheetData:s={}}=i||{},{pathname:r,search:l}=window.location;clearTimeout(S),t((0,T.setBottomSheetData)(s)),n(`${r}${l}`,{replace:!0,state:{modalType:o,widgetId:a}})})(t,M,n,k.PTM_REWARDS_GAMIFICATION_BOTTOMSHEET_MODAL,K);else if(ie)w(t,M,n,k.PTM_REWARDS_GAMIFICATION_OVERLAY_MODAL,K);else if(ae)y($,M,n);else if(se)y($,M,n);else if(me&&V)((e,t,n)=>{const{pathname:a,search:i}=window.location;v(n,t),t((0,u.logout)()),n(`${(0,o.getRelativePath)(e)}/?referer=${encodeURIComponent(`${a}${i}`)}`)})($,M,n);else if(me)y($,M,n,ce);else if(De)((e,t,n,o,a)=>{const{venueCode:i="",bookingId:s="",transactionId:r="",eventCode:l="",sessionId:d="",ticketQuantity:m=0,fnbQuantityWithTicket:u="",venueApplicationType:g=""}=o||{};if(a)window.location=n;else{const n={Venue_strShortName:"",ShowEndDateTime:"",Venue_strCode:i,BookingId:s,Booking_lngId:"",TransId:r,Event_strCode:l,Session_lngSessionId:d,Venue_strApplication:g,Trans_intQuantity:m,FnB:[...Array(+u)],Event_strShortName:""},o=(0,c.getNonBookingFlowFnBUrl)(n);e((0,T.setIsInternalCardRedirection)()),t(o)}})(M,n,$,O,G);else if(ue){const{description:e=""}=O||{};((e,t,n,o)=>{const{pathname:i,search:s}=window.location;window?.navigator?.share&&!o?window.navigator.share({text:t}).catch((e=>{(0,m.logError)(e)})):(e((0,a.setShareProps)(t,window.location.href)),n(`${i}${s}`,{state:{modalType:k.PTM_SHARE_MODAL}}))})(M,e,n,G)}else if(Z)w(t,M,n,k.PTM_LOGIN_MODAL,"");else if(Se)B($,x,M,Q);else if(ee)w(t,M,n,k.PTM_YOUTUBE_MODAL,"");else if(Te)!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>{},a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{pathname:i,search:s,state:r={}}=t,{modalType:l}=r||{};E.dispatch=o,E.refresh=n,E.navigate=e,E.isDesktop=a,e(i+s,l?{state:{modalType:d.modals.SPLIT_TICKET,prevModalType:l}}:{state:{modalType:d.modals.SPLIT_TICKET}})}(n,l,R,M,G);else if(_e)((e,t,n)=>{const{ticketDetails:o,venueCode:a}=n;(0,h.handleMobileCancellationFlow)(t,e,{...o,venueCode:a})})(n,M,{...b,venueCode:j});else if(Ie)v(n,M);else if(ge)((e,t)=>{t((0,i.showSnackBar)({element:(0,D.jsx)(s.default,{message:k.redirectionMessage}),isVisible:!0,autoHideDuration:3500,verticalPosition:"bottom",horizontalPosition:"center"})),setTimeout((()=>{window.open(e,"_blank")}),2e3)})($,M);else if(Me)(e=>{window.location=e})($);else if(he)((e,t,n)=>{t((0,T.setIsInternalCardRedirection)()),n((0,o.getRelativePath)(e))})($,M,n);else if(pe)(e=>{C=f.default.getState();const{bookingDetails:{orderDetails:{isGoBackEnabled:t=!1}={}}={}}=C;t&&2!==window.history.length?e(-1):e("/")})(n);else if(fe){const{scrollToWidget:e=""}=O||{};(e=>{let t=null;t=1==+e?document.getElementById("booking-details"):document.getElementById(`widget-${e}`),t&&t.scrollIntoView({behavior:"smooth"})})(e)}else if(ke)(async(e,t,n,a,i)=>{const{additionalData:s={}}=e||{},{eventCode:r="",eventName:l="",reviewSubmitted:c=!1}=s||{};if(!c)return w(e,t,n,a,i);{const{cookies:{rgn:{regionNameSlug:e=""}={}}={}}=f.default.getState()||{},a=e?`${d.BASE_URL}movies/${e}/${(0,o.slugify)(l)}/${r}/user-reviews`:`${d.BASE_URL}movies/${(0,o.slugify)(l)}/${r}/user-reviews`;await t((0,_.initiateGetSynopsisData)(r)),n(a)}})(t,M,n,k.PTM_RATING_MODAL,"");else if(Ce)w(t,M,n,k.PTM_FEEDBACK_FORM_MODAL,K);else if(we)(()=>{const e=document?.getElementById("ptm-carousal");e&&(e.scrollLeft+=e.children[0].clientWidth||0)})();else if(ve)(e=>{const{bookingDetails:{orderDetails:{bottomSheetData:{additionalData:{bottomSheetData:{info:t={}}={}}={}}={}}={},feedbackFormSubmitDetails:{feedbackFormPayload:n={}}}={}}=f.default.getState()||{},o={info:t,responses:n};e((0,p.fetchSubmitFeedbackForm)(o))})(M);else if(ye)((e,t,n,o)=>{const{search:a}=window.location,i=`${t.pathname}${a}`;o?e(`${i}`,{replace:!0,state:{modalType:k.PTM_LE_TRANSFER,widgetId:k.PTM_LE_TRANSFER,additionalData:n}}):e(`/my-profile/transfer${a}`,{replace:!0,state:{additionalData:n,redirectFrom:`${i}`}})})(n,l,O,G);else if(Ee&&z){const{search:e=""}=window.location,t=new URLSearchParams(e).get("redirectionType")||"PTM";M((0,p.handleScratchRewards)(O,t))}else Ee?((e,t)=>{e((0,p.handleFetchApiData)(t))})(M,{...O,data:{...O.data}}):Be?w(t,M,n,k.PTM_GENERIC_MODAL,K,!0):M((0,i.showSnackBar)({element:(0,D.jsx)(r.default,{message:k.errorWidgetFunctionality}),isVisible:!0,autoHideDuration:3500,verticalPosition:"bottom",horizontalPosition:"center"}))},b=(e,t,n,o,a,i)=>{M(e,t,n,o,a,i)},A=(e,t,n,o,a,i)=>{const{data:s=[]}=t,{cta:r={}}=s[0]||{};M(t,r,n,o,a,{widgetId:e,...i})},P=null}}]);